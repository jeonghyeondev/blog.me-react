{"ast":null,"code":"import _defineProperty from\"/Users/jeonghyeon/Desktop/kjh/dev/blog-react/blog-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/jeonghyeon/Desktop/kjh/dev/blog-react/blog-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/jeonghyeon/Desktop/kjh/dev/blog-react/blog-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Users/jeonghyeon/Desktop/kjh/dev/blog-react/blog-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _handleActions;var _marked=/*#__PURE__*/_regeneratorRuntime.mark(writeSaga);import{createAction,handleActions}from'redux-actions';import createRequestSaga,{createRequestActionTypes}from'../lib/createRequestSaga';import*as postsAPI from'../lib/api/posts';import{takeLatest}from'redux-saga/effects';var INITIALIZE='write/INITIALIZE';// 모든 내용 초기화\nvar CHANGE_FIELD='write/CHANGE_FIELD';// 특정 key 값 바꾸기\nvar _createRequestActionT=createRequestActionTypes('write/WRITE_POST'),_createRequestActionT2=_slicedToArray(_createRequestActionT,3),WRITE_POST=_createRequestActionT2[0],WRITE_POST_SUCCESS=_createRequestActionT2[1],WRITE_POST_FAILURE=_createRequestActionT2[2];// 포스트 작성\nvar SET_ORIGINAL_POST='write/SET_ORIGINAL_POST';// 수정 버튼 클릭 시 글쓰기 페이지로 이동\nvar _createRequestActionT3=createRequestActionTypes('write/UPDATE_POST'),_createRequestActionT4=_slicedToArray(_createRequestActionT3,3),UPDATE_POST=_createRequestActionT4[0],UPDATE_POST_SUCCESS=_createRequestActionT4[1],UPDATE_POST_FALURE=_createRequestActionT4[2];// 포스트 수정\nexport var initialize=createAction(INITIALIZE);export var changeField=createAction(CHANGE_FIELD,function(_ref){var key=_ref.key,value=_ref.value;return{key:key,value:value};});export var writePost=createAction(WRITE_POST,function(_ref2){var title=_ref2.title,body=_ref2.body,tags=_ref2.tags;return{title:title,body:body,tags:tags};});export var setOriginalPost=createAction(SET_ORIGINAL_POST,function(post){return post;});export var updatePost=createAction(UPDATE_POST,function(_ref3){var id=_ref3.id,title=_ref3.title,body=_ref3.body,tags=_ref3.tags;return{id:id,title:title,body:body,tags:tags};});// 사가 생성\nvar writePostSaga=createRequestSaga(WRITE_POST,postsAPI.writePost);var updatePostSage=createRequestSaga(UPDATE_POST,postsAPI.updatePost);export function writeSaga(){return _regeneratorRuntime.wrap(function writeSaga$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(WRITE_POST,writePostSaga);case 2:_context.next=4;return takeLatest(UPDATE_POST,updatePostSage);case 4:case\"end\":return _context.stop();}}},_marked);}var initialState={title:'',body:'',tags:[],post:null,postError:null,originalPostId:null};var write=handleActions((_handleActions={},_defineProperty(_handleActions,INITIALIZE,function(state){return initialState;}),_defineProperty(_handleActions,CHANGE_FIELD,function(state,_ref4){var _ref4$payload=_ref4.payload,key=_ref4$payload.key,value=_ref4$payload.value;return _objectSpread(_objectSpread({},state),{},_defineProperty({},key,value));}),_defineProperty(_handleActions,WRITE_POST,function(state){return _objectSpread(_objectSpread({},state),{},{// post와 postError을 초기화\npost:null,postError:null});}),_defineProperty(_handleActions,WRITE_POST_SUCCESS,function(state,_ref5){var post=_ref5.payload;return _objectSpread(_objectSpread({},state),{},{post:post});}),_defineProperty(_handleActions,WRITE_POST_FAILURE,function(state,_ref6){var postError=_ref6.payload;return _objectSpread(_objectSpread({},state),{},{postError:postError});}),_defineProperty(_handleActions,SET_ORIGINAL_POST,function(state,_ref7){var post=_ref7.payload;return _objectSpread(_objectSpread({},state),{},{title:post.title,body:post.body,tags:post.tags,originalPostId:post._id});}),_defineProperty(_handleActions,UPDATE_POST_SUCCESS,function(state,_ref8){var post=_ref8.payload;return _objectSpread(_objectSpread({},state),{},{post:post});}),_defineProperty(_handleActions,UPDATE_POST_FALURE,function(state,_ref9){var postError=_ref9.payload;return _objectSpread(_objectSpread({},state),{},{postError:postError});}),_handleActions),initialState);export default write;","map":{"version":3,"sources":["/Users/jeonghyeon/Desktop/kjh/dev/blog-react/blog-frontend/src/modules/write.js"],"names":["writeSaga","createAction","handleActions","createRequestSaga","createRequestActionTypes","postsAPI","takeLatest","INITIALIZE","CHANGE_FIELD","WRITE_POST","WRITE_POST_SUCCESS","WRITE_POST_FAILURE","SET_ORIGINAL_POST","UPDATE_POST","UPDATE_POST_SUCCESS","UPDATE_POST_FALURE","initialize","changeField","key","value","writePost","title","body","tags","setOriginalPost","post","updatePost","id","writePostSaga","updatePostSage","initialState","postError","originalPostId","write","state","payload","_id"],"mappings":"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","sourcesContent":["import { createAction, handleActions } from 'redux-actions';\nimport createRequestSaga, {\n  createRequestActionTypes,\n} from '../lib/createRequestSaga';\nimport * as postsAPI from '../lib/api/posts';\nimport { takeLatest } from 'redux-saga/effects';\n\nconst INITIALIZE = 'write/INITIALIZE'; // 모든 내용 초기화\nconst CHANGE_FIELD = 'write/CHANGE_FIELD'; // 특정 key 값 바꾸기\nconst [\n  WRITE_POST,\n  WRITE_POST_SUCCESS,\n  WRITE_POST_FAILURE,\n] = createRequestActionTypes('write/WRITE_POST'); // 포스트 작성\nconst SET_ORIGINAL_POST = 'write/SET_ORIGINAL_POST'; // 수정 버튼 클릭 시 글쓰기 페이지로 이동\nconst [\n  UPDATE_POST,\n  UPDATE_POST_SUCCESS,\n  UPDATE_POST_FALURE,\n] = createRequestActionTypes('write/UPDATE_POST'); // 포스트 수정\n\nexport const initialize = createAction(INITIALIZE);\nexport const changeField = createAction(CHANGE_FIELD, ({ key, value }) => ({\n  key,\n  value,\n}));\n\nexport const writePost = createAction(WRITE_POST, ({ title, body, tags }) => ({\n  title,\n  body,\n  tags,\n}));\n\nexport const setOriginalPost = createAction(SET_ORIGINAL_POST, (post) => post);\n\nexport const updatePost = createAction(\n  UPDATE_POST,\n  ({ id, title, body, tags }) => ({ id, title, body, tags }),\n);\n\n// 사가 생성\nconst writePostSaga = createRequestSaga(WRITE_POST, postsAPI.writePost);\nconst updatePostSage = createRequestSaga(UPDATE_POST, postsAPI.updatePost);\n\nexport function* writeSaga() {\n  yield takeLatest(WRITE_POST, writePostSaga);\n  yield takeLatest(UPDATE_POST, updatePostSage);\n}\n\nconst initialState = {\n  title: '',\n  body: '',\n  tags: [],\n  post: null,\n  postError: null,\n  originalPostId: null,\n};\n\nconst write = handleActions(\n  {\n    [INITIALIZE]: (state) => initialState, // initialState를 넣으면 초기 상태로 바뀜\n    [CHANGE_FIELD]: (state, { payload: { key, value } }) => ({\n      ...state,\n      [key]: value, // 특정 key 값을 업데이트\n    }),\n    [WRITE_POST]: (state) => ({\n      ...state,\n      // post와 postError을 초기화\n      post: null,\n      postError: null,\n    }),\n    // 포스트 작성 성공\n    [WRITE_POST_SUCCESS]: (state, { payload: post }) => ({\n      ...state,\n      post,\n    }),\n    // 포스트 작성 실패\n    [WRITE_POST_FAILURE]: (state, { payload: postError }) => ({\n      ...state,\n      postError,\n    }),\n    [SET_ORIGINAL_POST]: (state, { payload: post }) => ({\n      ...state,\n      title: post.title,\n      body: post.body,\n      tags: post.tags,\n      originalPostId: post._id,\n    }),\n    [UPDATE_POST_SUCCESS]: (state, { payload: post }) => ({\n      ...state,\n      post,\n    }),\n    [UPDATE_POST_FALURE]: (state, { payload: postError }) => ({\n      ...state,\n      postError,\n    }),\n  },\n  initialState,\n);\n\nexport default write;\n"]},"metadata":{},"sourceType":"module"}